---
import "../styles/global.css";

interface Props {
    title: string;
    description?: string;
}

const { title, description = "Slow Learner's Quest" } = Astro.props;
const isDev = import.meta.env.DEV;

let blogTitle = `${title} / ${description}`;
---

<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width" />
        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        <link
            rel="alternate"
            type="application/rss+xml"
            title="Slow Learner Quest RSS Feed"
            href="/rss.xml"
        />
        <title>{blogTitle}</title>
        {description && <meta name="description" content={description} />}

        { !isDev && (
          <script async src="https://plausible.io/js/pa-Z3u6Sa3r17addqGSBqL6a.js"></script>
          <script>
              ((window.plausible =
                  window.plausible ||
                  function () {
                      (plausible.q = plausible.q || []).push(arguments);
                  }),
                  (plausible.init =
                      plausible.init ||
                      function (i) {
                          plausible.o = i || {};
                      }));
              plausible.init();
          </script>
        )}

    </head>
    <body class="bg-gray-50 text-gray-900">
        {
            isDev && (
                <div class="bg-yellow-100 border-b-2 border-yellow-400 text-yellow-900 px-4 py-2 text-center text-sm font-medium">
                    ðŸš§ Development Mode - Draft posts visible
                </div>
            )
        }

        <div class="flex min-h-full flex-col">
          <header class="relative shrink-0 border-b border-gray-200 bg-white dark:border-white/10 dark:bg-gray-900 dark:before:pointer-events-none dark:before:absolute dark:before:inset-0 dark:before:bg-black/10">
            <div class="relative mx-auto flex w-full max-w-7xl h-16 items-center md:justify-start justify-between gap-x-8 px-4 py-10 sm:px-6 lg:px-8">
                <aside class="sticky top-8 hidden w-32 shrink-0 lg:block">
                </aside>
                <div class="flex items-center gap-4">
                    <img src="/favicon-32x32.png" />
                    <a href="/">
                        <h1 class="text-lg font-mono font-bold md:inline hidden">Slow Learner's Quest</h1>
                    </a>
                </div>

              <div class="flex items-center md:gap-x-2 md:pl-8 gap-x-4">
                  <a class="md:font-normal font-semibold hover:text-green-800" href="/about">About</a>
                  <a class="md:font-normal font-semibold hover:text-green-800" href="/rss.xml">Subscribe</a>
                  {
                      isDev && (
                          <a
                              href="/drafts"
                              class="hover:text-yellow-600 text-yellow-800 font-mono"
                          >
                              Drafts
                          </a>
                      )
                  }
              </div>
            </div>
          </header>

          <div class="mx-auto flex w-full max-w-7xl items-start gap-x-8 px-4 py-10 sm:px-6 lg:px-8">
            <aside class="sticky top-8 hidden w-32 shrink-0 lg:block">
            </aside>

            <main class="flex-1">
                <slot name="main" />
            </main>

            <aside class="sticky top-8 hidden w-84 shrink-0 xl:block">
                <slot name="side-bar" />
            </aside>
          </div>
          <footer
              class="mx-auto w-full max-w-7xl pb-8 md:px-0 px-4 border-t border-gray-200 text-sm text-gray-600"
          >
              <p class="mt-8">Slow Learner's Quest by Brian Kim Â· {new Date().getFullYear()} </p>
          </footer>
        </div>
    </body>
</html>
