---
import "../styles/global.css";
import Rectangle from "../components/Rectangle.astro";

interface Props {
    title: string;
    description?: string;
}

const { title, description = "Slow Learner's Quest" } = Astro.props;
const isDev = import.meta.env.DEV;

let blogTitle = `${title} / ${description}`;
---

<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width" />
        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        <link
            rel="alternate"
            type="application/rss+xml"
            title="Slow Learner Quest RSS Feed"
            href="/rss.xml"
        />
        <title>{blogTitle}</title>
        {description && <meta name="description" content={description} />}

        { !isDev && (
          <script async src="https://plausible.io/js/pa-Z3u6Sa3r17addqGSBqL6a.js"></script>
          <script>
              ((window.plausible =
                  window.plausible ||
                  function () {
                      (plausible.q = plausible.q || []).push(arguments);
                  }),
                  (plausible.init =
                      plausible.init ||
                      function (i) {
                          plausible.o = i || {};
                      }));
              plausible.init();
          </script>
        )}

    </head>
    <body class="bg-gray-50">
        {
            isDev && (
                <div class="bg-yellow-100 border-b-2 border-yellow-400 text-yellow-900 px-4 py-2 text-center text-sm font-medium">
                    ðŸš§ Development Mode - Draft posts visible
                </div>
            )
        }
        
        <div class="flex min-h-full flex-col">
            <header class="relative shrink-0 border-b border-gray-200 bg-white dark:border-white/10 dark:bg-gray-900 dark:before:pointer-events-none dark:before:absolute dark:before:inset-0 dark:before:bg-black/10">
                <div class="relative mx-auto flex w-full max-w-4xl h-12 items-center justify-between px-4 py-8 sm:px-6 lg:px-8">
                    <div class="flex items-center gap-4">
                        <a href="/" class="flex shrink-0 items-center md:gap-2 lg:gap-4">
                            <img src="/favicon-32x32.png" />
                            <h1 class="text-lg font-semibold md:inline hidden text-zinc-700">Slow Learner's Quest</h1>
                        </a>
                        <span class="text-zinc-400">/</span>
                        <div class="text-zinc-600 flex gap-2 text-sm/6">
                            <a class="hover:text-green-800" href="/tags">Tags</a>
                            <a class="hover:text-green-800" href="/series">Series</a>
                        </div>
                    </div>
                    
                    <div class="pl-2 lg:pl-0 flex items-center justify-evenly md:justify-start md:gap-6 w-64">
                          <a class="text-sm/6 text-gray-950 dark:text-white hover:text-green-800" href="/about">About</a>
                          <a class="text-sm/6 text-gray-950 dark:text-white hover:text-green-800" href="/rss.xml">Subscribe</a>
                          {
                              isDev && (
                                  <a
                                      href="/drafts"
                                      class="text-sm/6 text-gray-950 dark:text-white hover:text-yellow-600 text-yellow-800 font-mono"
                                  >
                                      Drafts
                                  </a>
                              )
                          }
                      </div>
                </div>
                
                
            </header>
            
            <div class="mx-auto max-w-4xl flex flex-col py-8 gap-2 sm:px-4 lg:px-8">
                <div class="flex gap-4 pb-6">
                    <main class="flex-1 px-4">
                        <slot name="main" />
                    </main>
                    <aside class="w-64 top-8 hidden md:block">
                        <slot name="side-bar" />
                    </aside>
                </div>
                <slot name="pagination" />
                <footer class="border-t border-gray-200 text-sm text-gray-600">
                    <p class="p-4 sm:px-0 text-sm md:text-base">{new Date().getFullYear()} Â· Slow Learner's Quest by Brian Kim</p>
                </footer>
            </div>
        </div>
    </body>
</html>
