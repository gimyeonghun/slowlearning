---
import getPostUrl from "../scripts/postUrl";

function dateFormat(date: Date) {
    const formattedDate = new Intl.DateTimeFormat("en-US", {
        year: "numeric",
        month: "short",
        day: "numeric",
    }).format(date);

    return formattedDate;
}

const { posts } = Astro.props;
---

<div class="mt-4 flow-root mb-8">
    <div class="-mx-4 -my-2 sm:-mx-6 lg:-mx-8">
        <div class="inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8">
            <div
                class="overflow-hidden shadow-sm outline-1 outline-black/5 sm:rounded-lg dark:shadow-none dark:-outline-offset-1 dark:outline-white/10"
            >
                <table
                    class="relative min-w-full divide-y divide-gray-300 dark:divide-white/15"
                >
                    <thead class="bg-gray-50 dark:bg-gray-800/75">
                        <tr>
                            <th
                                scope="col"
                                class="py-3.5 pr-3 pl-4 text-left text-sm font-semibold text-gray-900 sm:pl-6 dark:text-gray-200"
                                >Date</th
                            >
                            <th
                                scope="col"
                                class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900 dark:text-gray-200"
                                >Title</th
                            >
                        </tr>
                    </thead>
                    <tbody
                        class="divide-y divide-gray-200 bg-white dark:divide-white/10 dark:bg-gray-800/50"
                    >
                        {
                            posts.map((post) => (
                                <tr>
                                    <td class="py-4 pr-3 pl-4 text-sm font-medium whitespace-nowrap text-gray-900 sm:pl-6 dark:text-white">
                                        {dateFormat(post.data.date)}
                                    </td>
                                    <td class="px-3 py-4 text-sm whitespace-nowrap text-gray-500 dark:text-gray-400">
                                        <a
                                            href={getPostUrl(post)}
                                            class="hover:underline overflow-hidden text-clip"
                                        >
                                            {post.data.title}
                                        </a>
                                    </td>
                                </tr>
                            ))
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
